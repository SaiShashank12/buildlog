{% extends "base.html" %}

{% block content %}
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="bg-white rounded-lg shadow-md p-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-6">
            {% if project %}Edit Project{% else %}Create New Project{% endif %}
        </h1>

        <form method="POST" action="{% if project %}/projects/{{ project['$id'] }}/edit{% else %}/projects/new{% endif %}" class="space-y-6">
            <!-- Project Name -->
            <div>
                <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
                    Project Name <span class="text-red-500">*</span>
                </label>
                <input
                    type="text"
                    id="name"
                    name="name"
                    value="{{ project.name if project else '' }}"
                    required
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                    placeholder="My Awesome Project"
                >
            </div>

            <!-- Description -->
            <div>
                <label for="description" class="block text-sm font-medium text-gray-700 mb-2">
                    Description
                </label>
                <textarea
                    id="description"
                    name="description"
                    rows="4"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                    placeholder="A brief description of your project..."
                >{{ project.description if project else '' }}</textarea>
            </div>

            <!-- Tech Stack -->
            <div>
                <label for="tech_stack" class="block text-sm font-medium text-gray-700 mb-2">
                    Tech Stack
                </label>
                <input
                    type="text"
                    id="tech_stack"
                    name="tech_stack"
                    value="{{ project.tech_stack|join(', ') if project and project.tech_stack else '' }}"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                    placeholder="Python, FastAPI, Appwrite (comma-separated)"
                >
                <p class="text-xs text-gray-500 mt-1">Separate multiple items with commas</p>
            </div>

            <!-- Repository URL -->
            <div>
                <label for="repository_url" class="block text-sm font-medium text-gray-700 mb-2">
                    Repository URL
                </label>
                <input
                    type="url"
                    id="repository_url"
                    name="repository_url"
                    value="{{ project.repository_url if project else '' }}"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                    placeholder="https://github.com/username/repo"
                >
            </div>

            <!-- Demo URL -->
            <div>
                <label for="demo_url" class="block text-sm font-medium text-gray-700 mb-2">
                    Demo URL
                </label>
                <input
                    type="url"
                    id="demo_url"
                    name="demo_url"
                    value="{{ project.demo_url if project else '' }}"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                    placeholder="https://demo.example.com"
                >
            </div>

            <!-- Tags -->
            <div>
                <label for="tags" class="block text-sm font-medium text-gray-700 mb-2">
                    Tags
                </label>
                <input
                    type="text"
                    id="tags"
                    name="tags"
                    value="{{ project.tags|join(', ') if project and project.tags else '' }}"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                    placeholder="hackathon, web-app, ai (comma-separated)"
                >
                <p class="text-xs text-gray-500 mt-1">Separate multiple tags with commas</p>
            </div>

            <!-- Status (only show when editing) -->
            {% if project %}
            <div>
                <label for="status" class="block text-sm font-medium text-gray-700 mb-2">
                    Status
                </label>
                <select
                    id="status"
                    name="status"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                >
                    <option value="planning" {% if project.status == 'planning' %}selected{% endif %}>Planning</option>
                    <option value="in_progress" {% if project.status == 'in_progress' %}selected{% endif %}>In Progress</option>
                    <option value="completed" {% if project.status == 'completed' %}selected{% endif %}>Completed</option>
                    <option value="on_hold" {% if project.status == 'on_hold' %}selected{% endif %}>On Hold</option>
                </select>
            </div>
            {% endif %}

            <!-- Buttons -->
            <div class="flex gap-4 pt-4">
                <button
                    type="submit"
                    class="flex-1 bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-indigo-700 transition"
                >
                    <i class="fas fa-save mr-2"></i>
                    {% if project %}Update Project{% else %}Create Project{% endif %}
                </button>
                <a
                    href="{% if project %}/projects/{{ project['$id'] }}{% else %}/dashboard{% endif %}"
                    class="flex-1 bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition text-center"
                >
                    <i class="fas fa-times mr-2"></i> Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
